<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>百度地图</title>
    <style media="screen">
      *{
        margin: 0;
        padding: 0;
      }
      #allmap{
        width: 600px;
        height: 400px;
        border: 1px solid #ccc;
        margin: 0 auto;
      }
    </style>
    <script src="http://api.map.baidu.com/api?v=2.0&ak=bsvWQQZ5BZOrZasRspRinEzV6mGLGMtG"></script>
  </head>
  <body>
    <div id="allmap">
    </div>
  </body>
  <script type="text/javascript">
    var x,y;

    window.onload = function (){
      // 百度地图API功能
    navigator.geolocation.getCurrentPosition(getPosition);
  	var map = new BMap.Map("allmap");    // 创建Map实例
  	map.centerAndZoom(new BMap.Point(x, y), 100);  // 初始化地图,设置中心点坐标和地图级别
  	map.addControl(new BMap.MapTypeControl());   //添加地图类型控件
  	map.setCurrentCity("北京");          // 设置地图显示的城市 此项是必须设置的
  	map.enableScrollWheelZoom(true);
    }
    function getPosition(position){
      x=position.coords.latitude;
      y=position.coords.longitude;
    }
  </script>
</html>
